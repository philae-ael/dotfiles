#!/usr/bin/sh

DOTFILES_DIR="$HOME/dotfiles"

echo "usage : - addDotfiles pkg_name file"
echo "        - AddDotfiles -> back up package list"


echo
echo "backing up package list"

pacman -Qqe > "$DOTFILES_DIR/pkg.list"


PKG=$1
shift

while [ $# -gt 0 ]
do
    echo archiving $1
    mkdir -p "$DOTFILES_DIR/$PKG/$(dirname $1)"
    mv "$HOME/$1" "$DOTFILES_DIR/$PKG/$1"
    [ ! $? ] && exit -1

    echo stowing "$DOTFILES_DIR/$PKG"
    cd "$DOTFILES_DIR"
    stow "$PKG"
    shift;
done

echo
echo "Don't forget to commit"
